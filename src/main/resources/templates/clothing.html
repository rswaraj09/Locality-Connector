<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8">-->
<!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--  <title>Find Nearby Shops</title>-->
<!--  <style>-->
<!--    body {-->
<!--      font-family: Arial, sans-serif;-->
<!--      background-color: #f4f4f4;-->
<!--      text-align: center;-->
<!--      padding: 20px;-->
<!--    }-->

<!--    .find-button {-->
<!--      padding: 10px 20px;-->
<!--      background-color: #008CBA;-->
<!--      color: white;-->
<!--      border: none;-->
<!--      border-radius: 5px;-->
<!--      font-size: 1.2rem;-->
<!--      cursor: pointer;-->
<!--      transition: background-color 0.3s ease;-->
<!--    }-->

<!--    .find-button:hover {-->
<!--      background-color: #007B9E;-->
<!--    }-->

<!--    .message {-->
<!--      margin-top: 20px;-->
<!--      font-size: 1rem;-->
<!--      color: #333;-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->

<!--<h1>Find Nearby Shops</h1>-->
<!--<button class="find-button" onclick="findShops()">Find Nearby Shops</button>-->

<!--<p class="message" id="message"></p>-->

<!--<script>-->
<!--  function findShops() {-->
<!--    // Example: Fetch shops from an API or define them manually-->
<!--    const shops = [-->
<!--      {-->
<!--        businessName: "Fresh Mart",-->
<!--        location: "123 Main St",-->
<!--        latitude: 40.7128,-->
<!--        longitude: -74.0060-->
<!--      },-->
<!--      {-->
<!--        businessName: "Green Grocery",-->
<!--        location: "456 Elm St",-->
<!--        latitude: 40.7138,-->
<!--        longitude: -74.0050-->
<!--      }-->
<!--    ];-->

<!--    // Store in localStorage-->
<!--    localStorage.setItem('nearbyShops', JSON.stringify(shops));-->

<!--    // Provide user feedback and navigate to the display page-->
<!--    document.getElementById('message').innerText = 'Finding Nearby Shops';-->
<!--    setTimeout(() => {-->
<!--      window.location.href = 'nearbyshops';-->
<!--    }, 2000); // Redirect to the Nearby Shops page after 2 seconds-->
<!--  }-->
<!--</script>-->

<!--</body>-->
<!--</html>-->


<!--old code is below-->
<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8">-->
<!--  <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--  <title>Find Nearby Shops</title>-->
<!--  <style>-->
<!--    body {-->
<!--      font-family: Arial, sans-serif;-->
<!--      background-color: #f4f4f4;-->
<!--      text-align: center;-->
<!--      padding: 20px;-->
<!--    }-->

<!--    .find-button {-->
<!--      padding: 10px 20px;-->
<!--      background-color: #008CBA;-->
<!--      color: white;-->
<!--      border: none;-->
<!--      border-radius: 5px;-->
<!--      font-size: 1.2rem;-->
<!--      cursor: pointer;-->
<!--      transition: background-color 0.3s ease;-->
<!--    }-->

<!--    .find-button:hover {-->
<!--      background-color: #007B9E;-->
<!--    }-->

<!--    .message {-->
<!--      margin-top: 20px;-->
<!--      font-size: 1rem;-->
<!--      color: #333;-->
<!--    }-->
<!--  </style>-->
<!--</head>-->
<!--<body>-->

<!--<h1>Find Nearby Shops</h1>-->
<!--<button class="find-button" onclick="findShops()">Find Nearby Shops</button>-->

<!--<p class="message" id="message"></p>-->

<!--<script>-->
<!--  function findShops() {-->
<!--    if (navigator.geolocation) {-->
<!--      navigator.geolocation.getCurrentPosition(showPosition, showError);-->
<!--    } else {-->
<!--      document.getElementById('message').innerText = 'Geolocation is not supported by this browser.';-->
<!--    }-->
<!--  }-->

<!--  function showPosition(position) {-->
<!--    const userLatitude = position.coords.latitude;-->
<!--    const userLongitude = position.coords.longitude;-->

<!--    // Send user's location to backend for shop search-->
<!--    fetch('http://localhost:8080/findNearbyShops', {-->
<!--      method: 'POST',-->
<!--      headers: {-->
<!--        'Content-Type': 'application/json',-->
<!--      },-->
<!--      body: JSON.stringify({ latitude: userLatitude, longitude: userLongitude })-->
<!--    })-->
<!--    .then(response => response.json())-->
<!--    .then(data => {-->
<!--      // Store the received nearby shops in localStorage-->
<!--      localStorage.setItem('nearbyShops', JSON.stringify(data.shops));-->

<!--      // Provide user feedback and navigate to the display page-->
<!--      document.getElementById('message').innerText = 'Finding Nearby Shops';-->
<!--      setTimeout(() => {-->
<!--        window.location.href = 'nearbyshops'; // Redirect to nearby shops page-->
<!--      }, 2000);-->
<!--    })-->
<!--    .catch(error => {-->
<!--      document.getElementById('message').innerText = 'Error finding nearby shops.';-->
<!--      console.error('Error:', error);-->
<!--    });-->
<!--  }-->

<!--  function showError(error) {-->
<!--    switch(error.code) {-->
<!--      case error.PERMISSION_DENIED:-->
<!--        document.getElementById('message').innerText = "User denied the request for Geolocation.";-->
<!--        break;-->
<!--      case error.POSITION_UNAVAILABLE:-->
<!--        document.getElementById('message').innerText = "Location information is unavailable.";-->
<!--        break;-->
<!--      case error.TIMEOUT:-->
<!--        document.getElementById('message').innerText = "The request to get user location timed out.";-->
<!--        break;-->
<!--      case error.UNKNOWN_ERROR:-->
<!--        document.getElementById('message').innerText = "An unknown error occurred.";-->
<!--        break;-->
<!--    }-->
<!--  }-->
<!--</script>-->

<!--</body>-->
<!--</html>-->


<!--new added code -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find Nearby Shops</title>
    <style>
        body {
          font-family: Arial, sans-serif;
          background-color: #f4f4f4;
          text-align: center;
          padding: 20px;
        }

        .find-button {
          padding: 10px 20px;
          background-color: #008CBA;
          color: white;
          border: none;
          border-radius: 5px;
          font-size: 1.2rem;
          cursor: pointer;
          transition: background-color 0.3s ease;
        }

        .find-button:hover {
          background-color: #007B9E;
        }

        .message {
          margin-top: 20px;
          font-size: 1rem;
          color: #333;
        }
    </style>
</head>
<body>

<h1>Find Nearby Shops</h1>
<button class="find-button" onclick="findShops()">Find Nearby Shops</button>

<p class="message" id="message"></p>

<script>
    function findShops() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else {
        document.getElementById('message').innerText = 'Geolocation is not supported by this browser.';
      }
    }

    function showPosition(position) {
      const userLatitude = position.coords.latitude;
      console.log(userLatitude)
      const userLongitude = position.coords.longitude;
     console.log(userLongitude)


      // Send user's location to backend for shop search
      fetch('/findNearbyShops', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ latitude: userLatitude, longitude: userLongitude })
      })
      .then(response => response.json())
      .then(data => {
        // Store the received nearby shops in localStorage
        localStorage.setItem('nearbyShops', JSON.stringify(data.shops));

        // Provide user feedback and navigate to the display page
        document.getElementById('message').innerText = 'Finding Nearby Shops';
        setTimeout(() => {
          window.location.href = 'nearbyclothing'; // Corrected: Redirect to nearby shops page with file extension
        }, 2000);
      })
      .catch(error => {
        document.getElementById('message').innerText = 'Error finding nearby shops.';
        console.error('Error:', error);
      });
    }

    function showError(error) {
      switch(error.code) {
        case error.PERMISSION_DENIED:
          document.getElementById('message').innerText = "User denied the request for Geolocation.";
          break;
        case error.POSITION_UNAVAILABLE:
          document.getElementById('message').innerText = "Location information is unavailable.";
          break;
        case error.TIMEOUT:
          document.getElementById('message').innerText = "The request to get user location timed out.";
          break;
        case error.UNKNOWN_ERROR:
          document.getElementById('message').innerText = "An unknown error occurred.";
          break;
      }
    }
</script>

</body>
</html>
